{"dataflow":{"dfKey":"4bd5a80c-f130-44c4-ac28-b240a89a9255","name":"API_component_test_7967","tags":null,"description":null,"definition":"{\"name\":\"API_component_test_7967\",\"version\":0,\"livyServerId\":0,\"engineVariableName\":\"\",\"components\":[{\"udfNames\":[],\"componentId\":0,\"componentName\":\"startComponent\",\"tableName\":\"\",\"category\":\"Start\",\"componentType\":\"UDF\",\"rank\":0,\"dataSourceName\":\"\",\"displayRows\":0,\"dependencies\":[],\"className\":\"com.datagaps.dataflow.models.UDFComponent\",\"executionOption\":\"allparentpassorfail\",\"excludeNotification\":\"N\"},{\"url\":\"https://qa69.datagapsinc.in:8443/DataFlowService/api/v1.0/dataFlows/f4eb99d7-f09d-42de-ba06-e30b893372c6\",\"requestType\":\"GET\",\"headers\":[{\"key\":\"Accept\",\"value\":\"*/*\"},{\"key\":\"Accept-Encoding\",\"value\":\"gzip, deflate, br\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}],\"authorization\":{\"isVariable\":\"N\",\"type\":\"Bearer Token\",\"token\":\"eyJraWQiOiIwMzJkYWFiZi04ODEzLTQwZjItODViNy04MTM2ODgzMWI3NmMiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ1cGVuZGFyIiwiYXVkIjoiZGF0YW9wc3N1aXRlLWFwcGxpY2F0aW9uLWNsaWVudCIsInVzZXItYXV0aG9yaXRpZXMiOlsiZWRpdC1waXBlbGluZSIsImVkaXQtZGF0YS1zb3VyY2UiLCJlZGl0LWF6dXJlLWNsdXN0ZXIiLCJkYXRhZmxvdy1kYXRhLXJ1bGUiLCJ2aWV3LWRhdGEtcXVhbGl0eS1ydWxlIiwiZGF0YWZsb3ctZGF0YS1jb21wYXJlIiwidmlldy1kYXRhLXNvdXJjZSIsInZpZXctZG9tYWlucyIsInZpZXctYXp1cmUtdGVzdHBsYW4iLCJ2aWV3LWRhdGEtbW9kZWwiLCJleHRlcm5hbC12YXVsdCIsImVkaXQtZGF0YXNldCIsInZpZXctYXp1cmUtY2x1c3RlciIsImVkaXQtYXp1cmUtdGVzdHBsYW4iLCJlZGl0LXJlcG9ydCIsImVkaXQtZGF0YS1xdWFsaXR5LXJ1bGUiLCJhZGQtY29udGFpbmVyIiwidmlldy1zY2hlZHVsZXIiLCJ2aWV3LXN1YmplY3QtYXJlYSIsInZpZXctcmVwb3J0IiwicnVuLXRlc3RjYXNlIiwic2VydmVyLXNldHRpbmdzIiwiZWRpdC1saXZ5c2VydmVyIiwidmlldy1lbXItY2x1c3RlciIsImRhdGFmbG93LWRhdGEtb2JzZXJ2YWJpbGl0eSIsInJ1bi1waXBlbGluZSIsImVtYWlsLXRlbXBsYXRlIiwidmlldy1waXBlbGluZSIsImVkaXQtdGVtcGxhdGUiLCJsaWNlbnNlIiwicGFzc3dvcmQtdmF1bHQiLCJkYXRhZmxvdy1tZXRhZGF0YS1jb21wYXJlIiwiZWRpdC1zdWJqZWN0LWFyZWEiLCJkYXRhZmxvdy1kYXRhLXByb2ZpbGUiLCJkYXRhZmxvdy1tZXRyaWMtY29tcGFyZSIsImFkZC1yb2xlIiwicnVuLWRhdGFmbG93IiwiaW50ZWdyYXRpb24iLCJlZGl0LXNjaGVkdWxlciIsInZpZXctdGVzdGNhc2UiLCJtYW5hZ2UtY2x1c3RlciIsInZpZXctdGVtcGxhdGUiLCJ2aWV3LWRhdGFzZXQiLCJlZGl0LWRvbWFpbnMiLCJhcHAtcHJvcGVydGllcyIsIm1hbmFnZS1kYXRhLXNvdXJjZSIsInZpZXctZGF0YWZsb3ciLCJzZWN1cml0eSIsInZpZXctbGl2eXNlcnZlciIsIm9wZXJhdG9ycyIsImVkaXQtZGF0YWZsb3ciLCJlZGl0LWRhdGEtbW9kZWwiLCJlZGl0LWVtci1jbHVzdGVyIiwiZW52aXJvbm1lbnQiLCJwbHVnaW4iLCJlZGl0LXRlc3RjYXNlIiwiYXVkaXQtbG9ncyIsImN1c3RvbS1maWVsZHMiLCJtYW5hZ2UtYWNjZXNzIl0sIm5iZiI6MTY4MzI2MTg3NSwic2NvcGUiOlsib3BlbmlkIl0sImlzcyI6Imh0dHBzOlwvXC9xYTY5LmRhdGFnYXBzaW5jLmluOjg0NDNcL2RhdGFvcHNzZWN1cml0eVwvIiwiZXhwIjoxNjgzMjYzNjc1LCJpYXQiOjE2ODMyNjE4NzV9.lYBik9YxYIP3Xa0mYi9ExTqQsF9r-rBv5KlxBX3uepaZQYSuSyDHBEYkj29tg-kxQBb6XErIq9ArXnBGgw2zINB64FkTBfH_RUdgoa_lX7PMjkhHv8mVW_eDXCVcWSFwyITk98mrJ6-7UosuKvaIU4z_vDWiQ69iXhvblwB9VcgOdBq1BEKe_YEsBOWnPowvZ61Y_iGOTxxkzvJ-tRWqmA5N3LfSdxj4-jq_2FTvas9nrvbs1rU0zK7oC3Hl7hhuLW6VFC4QFG_bCS0XHsx6zNVBW4nHyUGjXQZmr7EzNbrChV6TA5f0bTo2jGzwY5oqpSHuYcZBe7nQoczQjWM3pw\"},\"body\":\"\",\"params\":[],\"preRequestScript\":\"\",\"baseUrl\":\"https://qa69.datagapsinc.in:8443/DataFlowService/api/v1.0/dataFlows\",\"endPoint\":\"/f4eb99d7-f09d-42de-ba06-e30b893372c6\",\"componentId\":1,\"componentName\":\"API 1\",\"tableName\":\"API_1\",\"category\":\"Source\",\"componentType\":\"API\",\"rank\":0,\"dataSourceName\":\"API_test_upendar\",\"displayRows\":50,\"dependencies\":[],\"options\":{},\"className\":\"com.datagaps.dataflow.models.APIComponent\",\"dataSourceLogicalName\":\"\",\"executionOption\":\"allparentpassorfail\",\"excludeNotification\":\"N\"},{\"code\":\"import datetime\\r\\nimport json\\r\\nimport re\\r\\nimport traceback\\r\\n\\r\\nfrom datagaps_utilities.config import log_file_path, data_source_type, app_version\\r\\nfrom datagaps_utilities.db_functions import get_db_connection\\r\\nfrom datagaps_utilities.inner_functions import run_pre_script_and_trigger_api, split_as_relational_data, \\\\\\r\\n    prepare_relation_dict, create_datasets_and_trigger_scala_methods\\r\\n\\r\\n\\r\\ndef api_component_to_rdb(session_object, dataflow_run_id, dataflow_id, component_run_id, api_details,\\r\\n                         primary_table_name\\u003d\\\"datagaps\\\", use_short_names\\u003dFalse, parse_all_strings\\u003dFalse,\\r\\n                         skip_one_to_one_relation\\u003dFalse):\\r\\n    \\\"\\\"\\\"\\r\\n    function to convert api response into relational spark datasets\\r\\n    :param skip_one_to_one_relation: reduce number of tables by combining tables which have one to one relation\\r\\n    :param dataflow_id: dataflow id by using datagaps inbuilt parameter $[dataflow_id]\\r\\n    :param dataflow_run_id: dataflow run id by using datagaps inbuilt parameter $[dataflow_run_id]\\r\\n    :param component_run_id: for db query\\r\\n    :param parse_all_strings: it will apply json parse on all strings\\r\\n    :param session_object: mandatory, spark session object from code component\\r\\n    :param api_details: details to call api in json format\\r\\n    :param primary_table_name: optional, name of primary table, if not specified it will use name \\\"datagaps\\\"\\r\\n    :param use_short_names: its boolean, if its True then replace large table names with short names\\r\\n    :return: None, just prints table relation and top 5 records in each table\\r\\n    \\\"\\\"\\\"\\r\\n    error_message \\u003d \\\"Some technical error.\\\"\\r\\n    try:\\r\\n        try:\\r\\n            with open(log_file_path, \\\"a\\\") as f:\\r\\n                f.write(\\r\\n                    f\\\"API Component: {datetime.datetime.now()}: {component_run_id}: {app_version}\\\\n\\\")\\r\\n        except:\\r\\n            error_message \\u003d f\\\"Permission denied for log file {log_file_path}.\\\"\\r\\n            raise\\r\\n        try:\\r\\n            db_connection \\u003d get_db_connection()\\r\\n            cursor \\u003d db_connection.cursor()\\r\\n        except Exception as e:\\r\\n            error_message \\u003d \\\"Unable to connect database.\\\"\\r\\n            raise Exception(f\\\"Unable to connect database: {e.__class__.__name__}: {e.__str__()}\\\\n\\\")\\r\\n        try:\\r\\n            if data_source_type \\u003d\\u003d \\\"postgres\\\":\\r\\n                cursor.execute(\\r\\n                    \\\"\\\"\\\"select name from t_df_component_run where df_component_run_id \\u003d %s limit 1\\\"\\\"\\\",\\r\\n                    (component_run_id,))\\r\\n            else:\\r\\n                cursor.execute(\\r\\n                    \\\"\\\"\\\"select name from t_df_component_run where df_component_run_id \\u003d :component_run_id limit 1\\\"\\\"\\\",\\r\\n                    [component_run_id, ])\\r\\n            component_name \\u003d cursor.fetchone()[0]\\r\\n            with open(log_file_path, \\\"a\\\") as f:\\r\\n                f.write(f\\\"API Component: {datetime.datetime.now()}: {component_run_id}: get component name from db.\\\\n\\\")\\r\\n        except:\\r\\n            error_message \\u003d \\\"Unable to get component name from db.\\\"\\r\\n            raise\\r\\n        try:\\r\\n            response \\u003d run_pre_script_and_trigger_api(api_details, session_object)\\r\\n            with open(log_file_path, \\\"a\\\") as f:\\r\\n                f.write(f\\\"API Component: {datetime.datetime.now()}: {component_run_id}: successfully run pre request script and \\\"\\r\\n                        f\\\"Triggered api, status code is {response.status_code}\\\\n\\\")\\r\\n        except:\\r\\n            error_message \\u003d \\\"Unable to get response from API.\\\"\\r\\n            raise\\r\\n        response_text \\u003d response.text\\r\\n\\r\\n        if data_source_type \\u003d\\u003d \\\"postgres\\\":\\r\\n            query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET output_json \\u003d %s, row_count \\u003d %s \\r\\n            WHERE df_component_run_id \\u003d %s\\u0027\\u0027\\u0027\\r\\n        else:\\r\\n            query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET output_json \\u003d :output_json, row_count \\u003d :row_count \\r\\n            WHERE df_component_run_id \\u003d :df_component_run_id\\u0027\\u0027\\u0027\\r\\n        cursor.execute(query_string, (response_text[:10000], response.status_code, component_run_id,))\\r\\n        db_connection.commit()\\r\\n        if response.status_code \\u003e\\u003d 300:\\r\\n            if data_source_type \\u003d\\u003d \\\"postgres\\\":\\r\\n                query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET status \\u003d %s\\r\\n                WHERE df_component_run_id \\u003d %s\\u0027\\u0027\\u0027\\r\\n            else:\\r\\n                query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET status \\u003d :status \\r\\n                WHERE df_component_run_id \\u003d :df_component_run_id\\u0027\\u0027\\u0027\\r\\n            cursor.execute(query_string, (\\u0027Error\\u0027, component_run_id,))\\r\\n            db_connection.commit()\\r\\n            return\\r\\n        try:\\r\\n            response_json \\u003d response.json()\\r\\n            print(response.text)\\r\\n            # relational_data \\u003d split_as_relational_data(input_json\\u003dresponse_json, primary_table_name\\u003dprimary_table_name,\\r\\n            #                                           use_short_names\\u003duse_short_names,\\r\\n            #                                           parse_all_strings\\u003dparse_all_strings,\\r\\n            #                                           skip_one_to_one_relation\\u003dskip_one_to_one_relation)\\r\\n            # final_dict \\u003d relational_data[\\\"final_dict\\\"]\\r\\n            # parent_tables \\u003d relational_data[\\\"parent_tables\\\"]\\r\\n            # short_names \\u003d relational_data[\\\"short_names\\\"]\\r\\n            # if short_names:\\r\\n            #     primary_table_name \\u003d short_names[primary_table_name]\\r\\n            #     parent_tables \\u003d {short_names[k]: [short_names[i] for i in v] for k, v in parent_tables.items()}\\r\\n            #     final_dict \\u003d {short_names[k]: v for k, v in final_dict.items()}\\r\\n\\r\\n            # primary_table_name \\u003d re.sub(\\\"[^0-9A-Za-z_]\\\", \\\"_\\\", primary_table_name)\\r\\n            # parent_tables \\u003d {re.sub(\\\"[^0-9A-Za-z_]\\\", \\\"_\\\", k): [re.sub(\\\"[^0-9A-Za-z_]\\\", \\\"_\\\", i) for i in v] for k, v in\\r\\n            #                  parent_tables.items()}\\r\\n            # final_dict \\u003d {re.sub(\\\"[^0-9A-Za-z_]\\\", \\\"_\\\", k): v for k, v in final_dict.items()}\\r\\n\\r\\n            # relation_dict \\u003d prepare_relation_dict(primary_table_name, parent_tables)\\r\\n\\r\\n            # dataset_names \\u003d create_datasets_and_trigger_scala_methods(relation_dict, None, final_dict, session_object,\\r\\n            #                                                           component_name, dataflow_run_id, dataflow_id,\\r\\n            #                                                           no_prints\\u003dTrue)\\r\\n            # session_object.sparkContext._jvm.com.datagaps.core.engine.utils.CodeUtils.deleteDatasetInfo(\\r\\n            #     json.dumps(dataset_names),\\r\\n            #     dataflow_run_id,\\r\\n            #     component_name)\\r\\n            # with open(log_file_path, \\\"a\\\") as f:\\r\\n            #     f.write(f\\\"API Component: {datetime.datetime.now()}: {component_run_id}: successfully created relational datasets\\\\n\\\")\\r\\n        except:\\r\\n            error_message \\u003d \\\"Unable to convert API response to relational datasets.\\\"\\r\\n            raise\\r\\n        relation_json \\u003d json.dumps(relation_dict)\\r\\n\\r\\n        if data_source_type \\u003d\\u003d \\\"postgres\\\":\\r\\n            query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET status \\u003d %s, schema \\u003d %s \\r\\n            WHERE df_component_run_id \\u003d %s\\u0027\\u0027\\u0027\\r\\n        else:\\r\\n            query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET status \\u003d :status, schema \\u003d :schema \\r\\n            WHERE df_component_run_id \\u003d :df_component_run_id\\u0027\\u0027\\u0027\\r\\n        cursor.execute(query_string, (\\u0027Ok\\u0027, relation_json, component_run_id))\\r\\n        db_connection.commit()\\r\\n        with open(log_file_path, \\\"a\\\") as f:\\r\\n            f.write(f\\\"API Component: {datetime.datetime.now()}: {component_run_id}: completed successfully\\\\n\\\")\\r\\n    except Exception as e:\\r\\n        if not error_message.startswith(\\\"Permission denied for log file\\\"):\\r\\n            with open(log_file_path, \\\"a\\\") as f:\\r\\n                f.write(f\\\"API Component: {datetime.datetime.now()}: {component_run_id}: {traceback.format_exc()}\\\\n\\\")\\r\\n        if error_message \\u003d\\u003d \\\"Unable to connect database.\\\":\\r\\n            raise\\r\\n        else:\\r\\n            if data_source_type \\u003d\\u003d \\\"postgres\\\":\\r\\n                query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET output_json \\u003d %s, status \\u003d %s\\r\\n                WHERE df_component_run_id \\u003d %s\\u0027\\u0027\\u0027\\r\\n            else:\\r\\n                query_string \\u003d \\u0027\\u0027\\u0027UPDATE t_df_comp_statements SET output_json \\u003d :output_json, status \\u003d :status\\r\\n                WHERE df_component_run_id \\u003d :df_component_run_id\\u0027\\u0027\\u0027\\r\\n            error_message \\u003d error_message + \\\"\\\\n\\\" + f\\\"{e.__class__.__name__}: {e.msg if hasattr(e, \\u0027msg\\u0027) else e.__str__()}\\\"\\r\\n\\r\\n            cursor.execute(query_string, (error_message, \\u0027Error\\u0027, component_run_id))\\r\\n            db_connection.commit()\\r\\n    finally:\\r\\n        try:\\r\\n            if cursor:\\r\\n                cursor.close()\\r\\n        except:\\r\\n            pass\\r\\n        try:\\r\\n            if db_connection:\\r\\n                db_connection.close()\\r\\n        except:\\r\\n            pass\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\napi_details \\u003d json.dumps({\\\"url\\\":\\\"https://qa69.datagapsinc.in:8443/DataFlowService/api/v1.0/dataFlows/f4eb99d7-f09d-42de-ba06-e30b893372c6\\\",\\\"requestType\\\":\\\"GET\\\",\\\"headers\\\":[{\\\"key\\\":\\\"Accept\\\",\\\"value\\\":\\\"*/*\\\"},{\\\"key\\\":\\\"Accept-Encoding\\\",\\\"value\\\":\\\"gzip, deflate, br\\\"},{\\\"key\\\":\\\"Content-Type\\\",\\\"value\\\":\\\"application/json\\\"}],\\\"authorization\\\":{\\\"isVariable\\\":\\\"N\\\",\\\"type\\\":\\\"Bearer Token\\\",\\\"token\\\":\\\"eyJraWQiOiIwMzJkYWFiZi04ODEzLTQwZjItODViNy04MTM2ODgzMWI3NmMiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ1cGVuZGFyIiwiYXVkIjoiZGF0YW9wc3N1aXRlLWFwcGxpY2F0aW9uLWNsaWVudCIsInVzZXItYXV0aG9yaXRpZXMiOlsiZWRpdC1waXBlbGluZSIsImVkaXQtZGF0YS1zb3VyY2UiLCJlZGl0LWF6dXJlLWNsdXN0ZXIiLCJkYXRhZmxvdy1kYXRhLXJ1bGUiLCJ2aWV3LWRhdGEtcXVhbGl0eS1ydWxlIiwiZGF0YWZsb3ctZGF0YS1jb21wYXJlIiwidmlldy1kYXRhLXNvdXJjZSIsInZpZXctZG9tYWlucyIsInZpZXctYXp1cmUtdGVzdHBsYW4iLCJ2aWV3LWRhdGEtbW9kZWwiLCJleHRlcm5hbC12YXVsdCIsImVkaXQtZGF0YXNldCIsInZpZXctYXp1cmUtY2x1c3RlciIsImVkaXQtYXp1cmUtdGVzdHBsYW4iLCJlZGl0LXJlcG9ydCIsImVkaXQtZGF0YS1xdWFsaXR5LXJ1bGUiLCJhZGQtY29udGFpbmVyIiwidmlldy1zY2hlZHVsZXIiLCJ2aWV3LXN1YmplY3QtYXJlYSIsInZpZXctcmVwb3J0IiwicnVuLXRlc3RjYXNlIiwic2VydmVyLXNldHRpbmdzIiwiZWRpdC1saXZ5c2VydmVyIiwidmlldy1lbXItY2x1c3RlciIsImRhdGFmbG93LWRhdGEtb2JzZXJ2YWJpbGl0eSIsInJ1bi1waXBlbGluZSIsImVtYWlsLXRlbXBsYXRlIiwidmlldy1waXBlbGluZSIsImVkaXQtdGVtcGxhdGUiLCJsaWNlbnNlIiwicGFzc3dvcmQtdmF1bHQiLCJkYXRhZmxvdy1tZXRhZGF0YS1jb21wYXJlIiwiZWRpdC1zdWJqZWN0LWFyZWEiLCJkYXRhZmxvdy1kYXRhLXByb2ZpbGUiLCJkYXRhZmxvdy1tZXRyaWMtY29tcGFyZSIsImFkZC1yb2xlIiwicnVuLWRhdGFmbG93IiwiaW50ZWdyYXRpb24iLCJlZGl0LXNjaGVkdWxlciIsInZpZXctdGVzdGNhc2UiLCJtYW5hZ2UtY2x1c3RlciIsInZpZXctdGVtcGxhdGUiLCJ2aWV3LWRhdGFzZXQiLCJlZGl0LWRvbWFpbnMiLCJhcHAtcHJvcGVydGllcyIsIm1hbmFnZS1kYXRhLXNvdXJjZSIsInZpZXctZGF0YWZsb3ciLCJzZWN1cml0eSIsInZpZXctbGl2eXNlcnZlciIsIm9wZXJhdG9ycyIsImVkaXQtZGF0YWZsb3ciLCJlZGl0LWRhdGEtbW9kZWwiLCJlZGl0LWVtci1jbHVzdGVyIiwiZW52aXJvbm1lbnQiLCJwbHVnaW4iLCJlZGl0LXRlc3RjYXNlIiwiYXVkaXQtbG9ncyIsImN1c3RvbS1maWVsZHMiLCJtYW5hZ2UtYWNjZXNzIl0sIm5iZiI6MTY4MzI2MTg3NSwic2NvcGUiOlsib3BlbmlkIl0sImlzcyI6Imh0dHBzOlwvXC9xYTY5LmRhdGFnYXBzaW5jLmluOjg0NDNcL2RhdGFvcHNzZWN1cml0eVwvIiwiZXhwIjoxNjgzMjYzNjc1LCJpYXQiOjE2ODMyNjE4NzV9.lYBik9YxYIP3Xa0mYi9ExTqQsF9r-rBv5KlxBX3uepaZQYSuSyDHBEYkj29tg-kxQBb6XErIq9ArXnBGgw2zINB64FkTBfH_RUdgoa_lX7PMjkhHv8mVW_eDXCVcWSFwyITk98mrJ6-7UosuKvaIU4z_vDWiQ69iXhvblwB9VcgOdBq1BEKe_YEsBOWnPowvZ61Y_iGOTxxkzvJ-tRWqmA5N3LfSdxj4-jq_2FTvas9nrvbs1rU0zK7oC3Hl7hhuLW6VFC4QFG_bCS0XHsx6zNVBW4nHyUGjXQZmr7EzNbrChV6TA5f0bTo2jGzwY5oqpSHuYcZBe7nQoczQjWM3pw\\\"},\\\"body\\\":\\\"\\\",\\\"params\\\":[],\\\"preRequestScript\\\":\\\"\\\"}) \\r\\napi_component_to_rdb(session_object\\u003dspark,dataflow_run_id\\u003d24990,dataflow_id\\u003d\\\"8329ffc5-0bf2-4965-b90b-7bc606e0a984\\\",component_run_id\\u003d350685,api_details\\u003dapi_details,primary_table_name\\u003d\\\"API_1\\\",parse_all_strings\\u003dTrue,use_short_names\\u003dFalse,skip_one_to_one_relation\\u003dTrue)\",\"kind\":\"pyspark\",\"dataSourceId\":0,\"componentId\":2,\"componentName\":\"Code 2\",\"tableName\":\"\",\"category\":\"Processor\",\"componentType\":\"Code\",\"rank\":0,\"dataSourceName\":\"\",\"displayRows\":50,\"dependencies\":[],\"options\":{},\"className\":\"com.datagaps.dataflow.models.CodeComponent\",\"executionOption\":\"\",\"excludeNotification\":\"N\"},{\"url\":\"https://qa69.datagapsinc.in:8443/CoreServiceRest/api/v1.0/datasources?containerID\\u003d81\\u0026type\\u003ddatasource\",\"requestType\":\"GET\",\"headers\":[{\"key\":\"Accept\",\"value\":\"*/*\"},{\"key\":\"Accept-Encoding\",\"value\":\"gzip, deflate, br\"},{\"key\":\"Content-Type\",\"value\":\"application/json\"}],\"authorization\":{\"isVariable\":\"N\",\"type\":\"Bearer Token\",\"token\":\"eyJraWQiOiIwMzJkYWFiZi04ODEzLTQwZjItODViNy04MTM2ODgzMWI3NmMiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJ1cGVuZGFyIiwiYXVkIjoiZGF0YW9wc3N1aXRlLWFwcGxpY2F0aW9uLWNsaWVudCIsInVzZXItYXV0aG9yaXRpZXMiOlsiZWRpdC1waXBlbGluZSIsImVkaXQtZGF0YS1zb3VyY2UiLCJlZGl0LWF6dXJlLWNsdXN0ZXIiLCJkYXRhZmxvdy1kYXRhLXJ1bGUiLCJ2aWV3LWRhdGEtcXVhbGl0eS1ydWxlIiwiZGF0YWZsb3ctZGF0YS1jb21wYXJlIiwidmlldy1kYXRhLXNvdXJjZSIsInZpZXctZG9tYWlucyIsInZpZXctYXp1cmUtdGVzdHBsYW4iLCJ2aWV3LWRhdGEtbW9kZWwiLCJleHRlcm5hbC12YXVsdCIsImVkaXQtZGF0YXNldCIsInZpZXctYXp1cmUtY2x1c3RlciIsImVkaXQtYXp1cmUtdGVzdHBsYW4iLCJlZGl0LXJlcG9ydCIsImVkaXQtZGF0YS1xdWFsaXR5LXJ1bGUiLCJhZGQtY29udGFpbmVyIiwidmlldy1zY2hlZHVsZXIiLCJ2aWV3LXN1YmplY3QtYXJlYSIsInZpZXctcmVwb3J0IiwicnVuLXRlc3RjYXNlIiwic2VydmVyLXNldHRpbmdzIiwiZWRpdC1saXZ5c2VydmVyIiwidmlldy1lbXItY2x1c3RlciIsImRhdGFmbG93LWRhdGEtb2JzZXJ2YWJpbGl0eSIsInJ1bi1waXBlbGluZSIsImVtYWlsLXRlbXBsYXRlIiwidmlldy1waXBlbGluZSIsImVkaXQtdGVtcGxhdGUiLCJsaWNlbnNlIiwicGFzc3dvcmQtdmF1bHQiLCJkYXRhZmxvdy1tZXRhZGF0YS1jb21wYXJlIiwiZWRpdC1zdWJqZWN0LWFyZWEiLCJkYXRhZmxvdy1kYXRhLXByb2ZpbGUiLCJkYXRhZmxvdy1tZXRyaWMtY29tcGFyZSIsImFkZC1yb2xlIiwicnVuLWRhdGFmbG93IiwiaW50ZWdyYXRpb24iLCJlZGl0LXNjaGVkdWxlciIsInZpZXctdGVzdGNhc2UiLCJtYW5hZ2UtY2x1c3RlciIsInZpZXctdGVtcGxhdGUiLCJ2aWV3LWRhdGFzZXQiLCJlZGl0LWRvbWFpbnMiLCJhcHAtcHJvcGVydGllcyIsIm1hbmFnZS1kYXRhLXNvdXJjZSIsInZpZXctZGF0YWZsb3ciLCJzZWN1cml0eSIsInZpZXctbGl2eXNlcnZlciIsIm9wZXJhdG9ycyIsImVkaXQtZGF0YWZsb3ciLCJlZGl0LWRhdGEtbW9kZWwiLCJlZGl0LWVtci1jbHVzdGVyIiwiZW52aXJvbm1lbnQiLCJwbHVnaW4iLCJlZGl0LXRlc3RjYXNlIiwiYXVkaXQtbG9ncyIsImN1c3RvbS1maWVsZHMiLCJtYW5hZ2UtYWNjZXNzIl0sIm5iZiI6MTY4MzI5OTAyOCwic2NvcGUiOlsib3BlbmlkIl0sImlzcyI6Imh0dHBzOlwvXC9xYTY5LmRhdGFnYXBzaW5jLmluOjg0NDNcL2RhdGFvcHNzZWN1cml0eVwvIiwiZXhwIjoxNjgzMzAwODI4LCJpYXQiOjE2ODMyOTkwMjh9.VJjF_0IslqPPmusCdLLK5jPftH26J8tX6Jh_TTp029iTMlN-coECXHzTcN__ivmwn_Kb3MdMhiKEOVRGvv2Oml4pDqQYk39xu0jYgA0HvXZyvvijyX4M_r2F2ehHHqSr_MNe0y4ohqakAXjCLcx7oW45BBMkh4QeZuFIeI-NU6XnCHJTxuEkwjedul3KLxOkLOZPM_apPs05gVyR46c4GcSF_C3CDv38xYd83KD-xpnIzz1d-qXs8TaQh00cGdM4a_dMSqIbS4PImw4FuglCOzLcKgR8TBX5grar8ogNad34gCjht89EwdvDy274PbSjnq8PBmTAvPZPjx33OkRYZA\"},\"body\":\"{\\n  \\\"name\\\": \\\"Datamodel_589\\\",\\n  \\\"description\\\": null,\\n  \\\"dataSourceName\\\": \\\"Oracle\\\",\\n  \\\"tableDataModels\\\": [\\n    {\\n      \\\"tableName\\\": \\\"CUSTOMERS\\\",\\n      \\\"schemaName\\\": \\\"SH\\\",\\n      \\\"description\\\": null,\\n      \\\"columns\\\": [\\n        {\\n          \\\"columnName\\\": \\\"CUST_VALID\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 23,\\n          \\\"columnLength\\\": \\\"1\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_EFF_TO\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"DATE\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 22,\\n          \\\"columnLength\\\": \\\"7\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_EFF_FROM\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"DATE\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 21,\\n          \\\"columnLength\\\": \\\"7\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_SRC_ID\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 20,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_TOTAL_ID\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 19,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_TOTAL\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 18,\\n          \\\"columnLength\\\": \\\"14\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_EMAIL\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 17,\\n          \\\"columnLength\\\": \\\"50\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_CREDIT_LIMIT\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 16,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_INCOME_LEVEL\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 15,\\n          \\\"columnLength\\\": \\\"30\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_MAIN_PHONE_NUMBER\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 14,\\n          \\\"columnLength\\\": \\\"25\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"COUNTRY_ID\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 13,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_STATE_PROVINCE_ID\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 12,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_STATE_PROVINCE\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 11,\\n          \\\"columnLength\\\": \\\"40\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_CITY_ID\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 10,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_CITY\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 9,\\n          \\\"columnLength\\\": \\\"30\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_POSTAL_CODE\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 8,\\n          \\\"columnLength\\\": \\\"10\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_STREET_ADDRESS\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 7,\\n          \\\"columnLength\\\": \\\"40\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_MARITAL_STATUS\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"Y\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 6,\\n          \\\"columnLength\\\": \\\"20\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_YEAR_OF_BIRTH\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 5,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_GENDER\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"CHAR\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 4,\\n          \\\"columnLength\\\": \\\"1\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_LAST_NAME\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 3,\\n          \\\"columnLength\\\": \\\"40\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_FIRST_NAME\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"VARCHAR2\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 2,\\n          \\\"columnLength\\\": \\\"20\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        },\\n        {\\n          \\\"columnName\\\": \\\"CUST_ID\\\",\\n          \\\"description\\\": \\\"\\\",\\n          \\\"dataType\\\": \\\"NUMBER\\\",\\n          \\\"isNull\\\": \\\"N\\\",\\n          \\\"attributeName\\\": null,\\n          \\\"entityName\\\": null,\\n          \\\"columnOrder\\\": 1,\\n          \\\"columnLength\\\": \\\"22\\\",\\n          \\\"columnAlias\\\": null,\\n          \\\"additionalInfo\\\": null\\n        }\\n      ],\\n      \\\"rules\\\": [\\n        {\\n          \\\"ruleName\\\": \\\"SQL Expression Rule_6266\\\",\\n          \\\"definition\\\": \\\"{\\\\\\\"severity\\\\\\\":\\\\\\\"Medium\\\\\\\",\\\\\\\"datasetSQLCondition\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"active\\\\\\\":\\\\\\\"Yes\\\\\\\",\\\\\\\"threshold\\\\\\\":\\\\\\\"50\\\\\\\",\\\\\\\"schemaName\\\\\\\":\\\\\\\"SH\\\\\\\",\\\\\\\"dataQualityDimension\\\\\\\":\\\\\\\"Validity\\\\\\\",\\\\\\\"ruleTypeLabel\\\\\\\":\\\\\\\"SQL Expression\\\\\\\",\\\\\\\"unit\\\\\\\":\\\\\\\"Percentage\\\\\\\",\\\\\\\"primaryColumn\\\\\\\":\\\\\\\"CUST_CITY\\\\\\\",\\\\\\\"recordsCount\\\\\\\":\\\\\\\"0\\\\\\\",\\\\\\\"displayColumns\\\\\\\":\\\\\\\"CUST_CITY\\\\\\\",\\\\\\\"ruleSQLCondition\\\\\\\":\\\\\\\"CUST_CITY LIKE (\\u0027%s%\\u0027) AND CUST_CITY_ID \\u003e 500 \\\\\\\",\\\\\\\"columnNames\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"successCriteria\\\\\\\":\\\\\\\"% of bad records is\\\\\\\",\\\\\\\"ruleConditionType\\\\\\\":\\\\\\\"bad records\\\\\\\",\\\\\\\"ruleType\\\\\\\":\\\\\\\"SQLExpression\\\\\\\",\\\\\\\"percentage\\\\\\\":\\\\\\\"70\\\\\\\",\\\\\\\"name\\\\\\\":\\\\\\\"SQL expression\\\\\\\",\\\\\\\"id\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"operation\\\\\\\":\\\\\\\"\\u003c\\\\\\\",\\\\\\\"workSchemaId\\\\\\\":\\\\\\\"0\\\\\\\"}\\\",\\n          \\\"description\\\": null,\\n          \\\"ruleType\\\": \\\"SQLExpression\\\",\\n          \\\"ruleOrder\\\": 0,\\n          \\\"tableName\\\": \\\"CUSTOMERS\\\",\\n          \\\"columnName\\\": \\\"CUST_CITY\\\",\\n          \\\"isActive\\\": \\\"Y\\\",\\n          \\\"dataQualityDimension\\\": \\\"Validity\\\",\\n          \\\"severity\\\": \\\"Medium\\\",\\n          \\\"customFieldsValues\\\": [],\\n          \\\"ruleCategory\\\": null,\\n          \\\"isValid\\\": null,\\n          \\\"ruleKey\\\": \\\"3f772768-0c59-41d4-b782-faf15656613a\\\"\\n        }\\n      ],\\n      \\\"relations\\\": null,\\n      \\\"sdvTemplate\\\": null,\\n      \\\"sampleDataSettingsJson\\\": null,\\n      \\\"datasourceName\\\": \\\"Oracle\\\",\\n      \\\"datasourceType\\\": \\\"Oracle\\\",\\n      \\\"uniqueColumns\\\": null\\n    }\\n  ],\\n  \\\"workschemaName\\\": null,\\n  \\\"dmkey\\\": \\\"e9976d7c-7b8b-48ab-8925-ef1cfc6b3053\\\"\\n}\",\"params\":[],\"preRequestScript\":\"\",\"baseUrl\":\"https://qa69.datagapsinc.in:8443/CoreServiceRest/api/v1.0\",\"endPoint\":\"/datasources?containerID\\u003d81\\u0026type\\u003ddatasource\",\"componentId\":3,\"componentName\":\"API 3\",\"tableName\":\"API_3\",\"category\":\"Source\",\"componentType\":\"API\",\"rank\":0,\"dataSourceName\":\"API_upendar_2\",\"displayRows\":50,\"dependencies\":[],\"options\":{},\"className\":\"com.datagaps.dataflow.models.APIComponent\",\"dataSourceLogicalName\":\"\",\"executionOption\":\"\",\"excludeNotification\":\"N\"}],\"isDeleteWorkSchemaTable\":\"N\"}","parameters":"[{\"name\":\"limit_rows\",\"defValueInInteractiveMode\":\"limit 10\",\"defValueInBatchMode\":\"limit 1000\"}]","version":3,"maxComponentId":3,"livyOptions":"{\"proxyUser\":\"\",\"jars\":[],\"pyFiles\":[],\"files\":[],\"driverMemory\":\"1G\",\"driverCores\":\"2\",\"executorMemory\":\"4G\",\"executorCores\":0,\"numExecutors\":0,\"archives\":[],\"queue\":\"\",\"name\":\"\",\"conf\":{\"spark.sql.shuffle.partitions\":\"600\"},\"heartbeatTimeoutInSecond\":0,\"kind\":\"spark\"}","isDeleted":"N","userName":null,"type":"dataflow","environmentName":"","folderPath":"Dataflow/upendar","workSchemaName":null},"analysis":[],"datamodels":[],"tagDetails":[],"dataCompares":[]}